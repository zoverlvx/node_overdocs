{"version":3,"sources":["../src/router.js"],"names":["express","require","app","router","Router","mongoose","Libraries","_","bodyParser","jsonParser","json","use","get","req","res","console","log","body","find","err","library_name","status","message","findOne","params","method","entries","description","post","create","library","put","updatedLibrary","send","updatedMethod","updatedDescription","delete","findOneAndRemove","module","exports"],"mappings":"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","file":"router.js","sourcesContent":["'use strict';\n\nconst express = require(\"express\");\nconst app = express();\nconst router = express.Router();\nconst mongoose = require('mongoose');\nconst Libraries = require('../models/library');\nconst _ = require('underscore');\nconst bodyParser = require('body-parser');\nconst jsonParser = bodyParser.json();\n\napp.use(jsonParser);\n\n\n//GET all libraries\nrouter.get('/libraries', (req, res) => {\n    //console.log(req.headers['user-agent']);\n    //console.log(req.headers);\n    console.log(req.body);\n    \n    Libraries.find((err, library_name) => {\n        if (err) {\n            return res.status(500).json({\n                message: 'Internal Server Error'\n            });\n        }\n        res.json(library_name);\n    });\n});\n\n//GET library\nrouter.get('/libraries/:library_name/', (req, res) => {\n    Libraries.findOne({\n        library_name: req.params.library_name\n    }), (err, method) => {\n        if (err) {\n            return res.status(500).json({\n                message: 'Library not found.'\n            });\n        }\n        res.json(method);\n    }\n});\n\n//GET method\nrouter.get('/libraries/:library_name/:method/', (req, res) => {\n    Libraries.findOne({\n        method: req.params.entries[0].method\n    }), (err, description) => {\n        if (err) {\n            return res.status(500).json({\n                message: 'Method not found.'\n            });\n        }\n        res.json(description);\n    }\n});\n\n//POST libraries\nrouter.post('/libraries', (req, res) => {\n    Libraries.create({\n        library_name: req.params.library_name\n    }, (err, library) => {\n        if (err) {\n            return res.status(500).json({\n                message: 'Internal Server Error'\n            });\n        }\n        res.status(201).json(library);\n    });\n});\n\n//PUT\n// router.put('/libraries/:library_name', (req, res) => {\n//     console.log('This is req.body: ', req.body);\n//     console.log('This is req.params ',  req.params);\n//     console.log('This is req.body.entries[0] ', req.body.entries[0]);\n//     console.log('This is req.body.entries[0].method ', req.body.entries[0].method);\n//     console.log('This is req.body.entries[0].description', req.body.entries[0].description);\n//     console.log('This is req.params.library_name', req.params.library_name);\n    //console.log('This is req.body.library_name', req.body.library_name);\n    \n//     Libraries.findOneAndUpdate({\n//             \"library_name\": req.params.library_name\n//         }, \n//         {\n//             $set: [{\n//                 \"method\": req.body.entries[0].method,\n//                 \"description\": req.body.entries[0].description\n//             }]\n//         })\n//         .exec((err, update) => {\n//             console.log('Update', update);\n//             if (err) {\n//                 res.status(500).send(err);\n//             }\n//             else {\n//                 res.status(200).send(update);\n//             }\n//         })\n// });\n\nrouter.put('/libraries/:library_name', (req, res) => {\n    let library_name = req.params.library_name;\n    Libraries.findOne({library_name: library_name}, (err, updatedLibrary) => {\n        if (err) {  \n            res.status(500).send(err);\n        } else if (req.params.library_name) {\n            updatedLibrary.library_name = req.params.library_name;\n            res.status(200).send(updatedLibrary);\n        }\n    });\n});\n\nrouter.put('/libraries/:library_name/:method', (req, res) => {\n    let method = req.body.entries[0].method;\n    Libraries.findOne({method: method}, (err, updatedMethod) => {\n        if (err) {\n            res.status(500).send(err);\n        } else if (req.body.entries[0].method) {\n            updatedMethod.method = req.body.entries[0].method;\n            res.status(200).send(updatedMethod);\n            \n        }        \n    });\n});\n\nrouter.put('/libraries/:library_name/:method/:description', (req, res) => {\n let description = req.body.entries[0].description // still, no idea why this is doing this   \n    Libraries.findOne({description: description}, (err, updatedDescription) => {\n        if (err) {\n            res.status(500).send(err);\n        } else if (req.body.entries[0].description) {\n            updatedDescription.description = req.body.entries[0].description;\n            res.status(200).send(updatedDescription);\n        }\n    });\n});\n\n\n//DELETE library and methods\nrouter.delete('/libraries/:library_name', (req, res) => {\n   let library_name = req.params.library_name;\n   Libraries.findOneAndRemove({library_name: library_name}, (err) => {\n       if (err) {\n           console.log(err);\n           res.status(500).send();\n       }\n       \n        res.status(200).send();\n   });\n});\n    \n\n//DELETE method and description\nrouter.delete('/libraries/:library_name/:method', (req, res) => {\n   let method = req.body.entries[0].method;\n   Libraries.findOneAndRemove({method: method}, (err) => {\n       if (err) {\n           console.log(err);\n           res.status(500).send();\n       }\n       \n        res.status(200).send();\n   });\n});\n\nmodule.exports = router;\n"]}